<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Five Systems of the Healthcare Value Chain — Zoadigm / MASON 3.0</title>
<meta name="description" content="A taxonomy for how information and value flow through the physician practice, payer, insurer, and reinsurer ecosystem">

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;0,9..40,800;1,9..40,400&family=DM+Serif+Display&display=swap" rel="stylesheet">

<!-- React via CDN -->
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>

<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  html { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
  body {
    font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
    background: #F4F5F7;
    color: #1B2A4A;
    min-height: 100vh;
  }
  #root { min-height: 100vh; }

  /* Animations */
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  @keyframes pulse {
    0%, 100% { opacity: 0.4; }
    50% { opacity: 0.8; }
  }
  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  .anim-fade-in { animation: fadeInUp 0.5s ease-out both; }
  .anim-fade-in-d1 { animation: fadeInUp 0.5s ease-out 0.08s both; }
  .anim-fade-in-d2 { animation: fadeInUp 0.5s ease-out 0.16s both; }
  .anim-fade-in-d3 { animation: fadeInUp 0.5s ease-out 0.24s both; }
  .anim-fade-in-d4 { animation: fadeInUp 0.5s ease-out 0.32s both; }

  /* Subtle texture */
  .bg-texture {
    background-image:
      radial-gradient(ellipse at 20% 50%, rgba(59,125,216,0.04) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 20%, rgba(199,146,62,0.05) 0%, transparent 50%),
      radial-gradient(ellipse at 50% 80%, rgba(107,76,154,0.03) 0%, transparent 50%);
  }

  /* Selection */
  ::selection { background: rgba(199,146,62,0.2); }
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useCallback, useMemo } = React;

/* ── Design Tokens ── */
const C = {
  navy: "#1B2A4A",
  darkBlue: "#2E5090",
  medBlue: "#3B7DD8",
  lightBlue: "#E8F0FA",
  gold: "#C7923E",
  goldLight: "#FDF6EC",
  goldMuted: "#E8D5B8",
  teal: "#1A8A7D",
  tealLight: "#E6F5F3",
  purple: "#6B4C9A",
  purpleLight: "#F0EBF5",
  coral: "#D4574B",
  coralLight: "#FBEAE8",
  green: "#3D8B37",
  greenLight: "#EAF5E9",
  gray: "#6B7280",
  grayLight: "#F7F8FA",
  grayBorder: "#E5E7EB",
  white: "#FFFFFF",
  bg: "#F4F5F7",
};

/* ── Data ── */
const CATEGORIES = [
  {
    id: "record", label: "Systems of Record", short: "Record",
    color: C.darkBlue, bg: C.lightBlue, icon: "◧",
    question: "What happened?",
    fn: "Authoritative repositories of clinical, administrative, and financial events",
    examples: "EHRs (Epic, OncoEMR, iKnowMed), payer claims adjudication engines, pharmacy dispensing systems, lab information systems",
    econ: "Storage, retrieval, regulatory compliance, and legal authority over documented facts",
    metaphor: "The bookkeeping of the production floor",
    flow: "Produces the raw material — documented encounters, adjudicated claims, clinical observations — that all other system categories consume",
  },
  {
    id: "insight", label: "Systems of Insight", short: "Insight",
    color: C.purple, bg: C.purpleLight, icon: "◉",
    question: "What does it mean?",
    fn: "Read from systems of record and produce intelligence, analytics, and clinical decision support",
    examples: "Flatiron RWE, Tempus genomic analytics, New Century Health pathway management, population health platforms, clinical decision support",
    econ: "Information asymmetry reduction and decision optimization",
    metaphor: "The industrial engineering function",
    flow: "Reads documented events and transforms them into actionable intelligence — pathway adherence signals, risk predictions, cost trend analyses — that inform but do not determine financial settlement",
  },
  {
    id: "interop", label: "Systems of Interoperability", short: "Interoperability",
    color: C.teal, bg: C.tealLight, icon: "⬡",
    question: "How does data move?",
    fn: "Transport and normalize data between systems of record across organizational and technical boundaries",
    examples: "Epic Payer Platform, Availity, Surescripts, CommonWell, Carequality, Da Vinci protocol stack, clearinghouses, FHIR APIs",
    econ: "Friction reduction, connectivity, and standards compliance",
    metaphor: "The logistics and transport layer",
    flow: "Enables the physical movement of data that systems of record produce and all other categories need — without interoperability, each system operates in isolation",
  },
  {
    id: "engagement", label: "Systems of Patient Engagement", short: "Engagement",
    color: C.green, bg: C.greenLight, icon: "◎",
    question: "How does the patient participate?",
    fn: "Extend the system boundary to include the patient as an active participant in their care process",
    examples: "Patient portals, ePRO collection tools, Navigating Cancer, remote monitoring, symptom trackers, care navigation apps",
    econ: "Patient activation, adherence, and data capture from lived experience",
    metaphor: "The co-production interface — the patient as participant in value creation",
    flow: "Generates patient-originated data (symptoms, preferences, adherence, outcomes) that feeds back into systems of record and insight, closing the information loop around the person care is designed to serve",
  },
  {
    id: "resolution", label: "Systems of Value Resolution", short: "Value Resolution",
    color: C.gold, bg: C.goldLight, icon: "⬢",
    question: "What is it worth, and who gets paid?",
    fn: "Measure, decompose, adjudicate, and settle the economic value of clinical episodes across the parties to a contract",
    examples: "Zoadigm/MASON: OPC target pricing, scope tagging, corridor/stop-loss mechanics, quality gates, settlement statements, TCOC nesting, risk bifurcation",
    econ: "Value realization — completing the circuit from clinical labor to recognized economic exchange",
    metaphor: "The point where potential value resolves into actual value through exchange",
    flow: "Consumes outputs from all four other categories — documented events from Record, pathway adherence from Insight, normalized data from Interoperability, patient outcomes from Engagement — and produces the one thing none of them can: a deterministic, auditable settlement of what the care was worth",
  },
];

const MOMENTS = [
  { label: "Measurement", desc: "What is this episode worth?", icon: "△",
    mason: "AI-generated OPC target prices derived from clinical pathway, genomics, comorbidities, and SDOH — not actuarial averages but episode-specific, risk-adjusted budgets." },
  { label: "Decomposition", desc: "Drug cost · coordination value · performance surplus · volatility risk", icon: "▽",
    mason: "Fee-for-Value structure separates drug cost (Invoice + 2%), coordination value ($1,050 intake, $250 triage PMPM), performance surplus (shared savings), and volatility risk (reinsurance transfer)." },
  { label: "Adjudication", desc: "Scope tagging · corridors · quality gates · risk share", icon: "◇",
    mason: "CCA specification encodes scope tagging with reason codes, corridor mechanics (±5%), stop-loss thresholds, quality gate pass/fail — all deterministic, versioned, and reproducible." },
  { label: "Realization", desc: "Settlement statements · remittance · financial transfer", icon: "□",
    mason: "Settlement Statements (Exhibits A–L) with quarterly provisional settlement, 90-day runout, 60-day dispute window, annual final true-up. Three TCOC nesting methods." },
  { label: "Completion", desc: "Clinical labor → recognized economic value", icon: "○",
    mason: "The circuit closes: clinical labor → documented events → measured episodes → adjudicated performance → settled payment. Value that was previously invisible becomes recognized and compensated." },
];

/* ── Main App ── */
function App() {
  const [selected, setSelected] = useState("resolution");
  const [view, setView] = useState("ecosystem");

  const cat = useMemo(() => CATEGORIES.find(c => c.id === selected), [selected]);

  return (
    <div className="bg-texture" style={{ minHeight: "100vh", padding: "28px 20px 48px" }}>
      <div style={{ maxWidth: 1080, margin: "0 auto" }}>

        {/* ── Header ── */}
        <header className="anim-fade-in" style={{ marginBottom: 28 }}>
          <div style={{ display: "flex", alignItems: "baseline", gap: 12, marginBottom: 4 }}>
            <h1 style={{ fontFamily: "'DM Serif Display', serif", fontSize: 28, fontWeight: 400, color: C.navy, letterSpacing: "-0.5px" }}>
              Five Systems of the Healthcare Value Chain
            </h1>
          </div>
          <p style={{ fontSize: 13.5, color: C.gray, lineHeight: 1.5, maxWidth: 700 }}>
            A taxonomy for how information and value flow through the physician practice, payer, insurer, and reinsurer ecosystem
          </p>
        </header>

        {/* ── View Tabs ── */}
        <nav className="anim-fade-in-d1" style={{ display: "flex", gap: 3, marginBottom: 22 }}>
          {[
            { id: "ecosystem", label: "Ecosystem" },
            { id: "flows", label: "Data Flows" },
            { id: "moments", label: "Value Resolution" },
          ].map(v => (
            <button key={v.id} onClick={() => setView(v.id)} style={{
              padding: "8px 20px", border: "none", borderRadius: 6, fontSize: 12.5, fontWeight: 600,
              fontFamily: "'DM Sans', sans-serif", cursor: "pointer", transition: "all 0.25s",
              background: view === v.id ? C.navy : "rgba(255,255,255,0.7)",
              color: view === v.id ? C.white : C.gray,
              boxShadow: view === v.id ? "0 2px 8px rgba(27,42,74,0.2)" : "0 1px 2px rgba(0,0,0,0.04)",
            }}>
              {v.label}
            </button>
          ))}
        </nav>

        {/* ── View Content ── */}
        <div className="anim-fade-in-d2">
          {view === "ecosystem" && <EcosystemView selected={selected} onSelect={setSelected} />}
          {view === "flows" && <FlowsView selected={selected} onSelect={setSelected} />}
          {view === "moments" && <MomentsView />}
        </div>

        {/* ── Detail Panel ── */}
        <div className="anim-fade-in-d3" style={{
          marginTop: 18, background: C.white, borderRadius: 14,
          border: `1px solid ${C.grayBorder}`, overflow: "hidden",
          boxShadow: "0 1px 4px rgba(0,0,0,0.04)",
        }}>
          <div style={{
            padding: "14px 22px",
            background: `linear-gradient(135deg, ${cat.bg}, ${cat.bg}88)`,
            borderBottom: `1px solid ${cat.color}18`,
          }}>
            <div style={{ display: "flex", alignItems: "center", gap: 12 }}>
              <span style={{
                width: 36, height: 36, borderRadius: 8,
                background: `${cat.color}15`, border: `1.5px solid ${cat.color}30`,
                display: "flex", alignItems: "center", justifyContent: "center",
                fontSize: 16, color: cat.color, fontWeight: 700,
              }}>{cat.icon}</span>
              <div>
                <h2 style={{ fontSize: 15, fontWeight: 700, color: cat.color, margin: 0 }}>{cat.label}</h2>
                <p style={{ fontSize: 12.5, color: C.gray, margin: 0, fontStyle: "italic" }}>
                  "{cat.question}"
                </p>
              </div>
            </div>
          </div>
          <div style={{ padding: "18px 22px", display: "grid", gridTemplateColumns: "1fr 1fr", gap: "16px 24px" }}>
            <InfoBlock label="Function" text={cat.fn} />
            <InfoBlock label="Examples" text={cat.examples} />
            <InfoBlock label="Economic Logic" text={cat.econ} />
            <InfoBlock label="Structural Metaphor" text={cat.metaphor} />
            <div style={{ gridColumn: "1 / -1" }}>
              <InfoBlock label="Data Flow Role" text={cat.flow} accent={cat.color} />
            </div>
          </div>
        </div>

        {/* ── Footer ── */}
        <footer className="anim-fade-in-d4" style={{
          marginTop: 28, padding: "14px 0",
          borderTop: `1px solid ${C.grayBorder}`,
          display: "flex", justifyContent: "space-between", alignItems: "center",
        }}>
          <span style={{ fontSize: 11, color: C.gray }}>Zoadigm + MASON 3.0 · Competitive Positioning Framework</span>
          <span style={{ fontSize: 11, color: C.gray }}>Confidential · February 2026</span>
        </footer>
      </div>
    </div>
  );
}

/* ── Info Block ── */
function InfoBlock({ label, text, accent }) {
  return (
    <div>
      <div style={{
        fontSize: 9.5, fontWeight: 700, textTransform: "uppercase", letterSpacing: "1px",
        color: accent || C.gray, marginBottom: 5, opacity: 0.8,
      }}>{label}</div>
      <div style={{ fontSize: 13, lineHeight: 1.6, color: C.navy }}>{text}</div>
    </div>
  );
}

/* ═══════════════════════════════════════════
   ECOSYSTEM VIEW
   ═══════════════════════════════════════════ */
function EcosystemView({ selected, onSelect }) {
  const outer = CATEGORIES.filter(c => c.id !== "resolution");
  const center = CATEGORIES.find(c => c.id === "resolution");
  const W = 500, H = 400;
  const cx = 245, cy = 200, R = 148;

  const positions = useMemo(() => {
    const pos = {};
    outer.forEach((cat, i) => {
      const angle = (i / outer.length) * 2 * Math.PI - Math.PI / 2;
      pos[cat.id] = { x: cx + R * Math.cos(angle), y: cy + R * Math.sin(angle) };
    });
    pos.resolution = { x: cx, y: cy };
    return pos;
  }, []);

  return (
    <div style={{
      background: C.white, borderRadius: 14, padding: "22px 24px",
      border: `1px solid ${C.grayBorder}`, boxShadow: "0 1px 4px rgba(0,0,0,0.04)",
    }}>
      <div style={{ display: "flex", gap: 28, alignItems: "flex-start" }}>
        {/* SVG Diagram */}
        <div style={{ flexShrink: 0 }}>
          <svg width={W} height={H} viewBox={`0 0 ${W} ${H}`} style={{ display: "block" }}>
            <defs>
              <filter id="glow">
                <feGaussianBlur stdDeviation="3" result="blur" />
                <feMerge><feMergeNode in="blur" /><feMergeNode in="SourceGraphic" /></feMerge>
              </filter>
            </defs>

            {/* Subtle radial background */}
            <circle cx={cx} cy={cy} r={R + 60} fill="none" stroke={C.grayBorder} strokeWidth="0.5" strokeDasharray="2,6" opacity="0.5" />
            <circle cx={cx} cy={cy} r={R + 30} fill="none" stroke={C.grayBorder} strokeWidth="0.5" strokeDasharray="2,6" opacity="0.3" />

            {/* Connection lines */}
            {outer.map(cat => {
              const p = positions[cat.id];
              const active = selected === cat.id || selected === "resolution";
              return (
                <line key={`line-${cat.id}`}
                  x1={p.x} y1={p.y} x2={cx} y2={cy}
                  stroke={active ? cat.color : "#D1D5DB"}
                  strokeWidth={active ? 2 : 1}
                  strokeDasharray={active ? "none" : "3,5"}
                  opacity={active ? 0.5 : 0.3}
                />
              );
            })}

            {/* Secondary links between outer nodes */}
            {[
              ["record", "insight"],
              ["interop", "record"],
              ["engagement", "record"],
            ].map(([a, b], i) => {
              const pa = positions[a], pb = positions[b];
              if (!pa || !pb) return null;
              return (
                <line key={`sec-${i}`}
                  x1={pa.x} y1={pa.y} x2={pb.x} y2={pb.y}
                  stroke="#E5E7EB" strokeWidth={0.8} strokeDasharray="2,5" opacity={0.4}
                />
              );
            })}

            {/* Flow arrows on connection lines */}
            {outer.map(cat => {
              const p = positions[cat.id];
              const active = selected === cat.id || selected === "resolution";
              if (!active) return null;
              const dx = cx - p.x, dy = cy - p.y;
              const dist = Math.sqrt(dx*dx + dy*dy);
              const nx = dx/dist, ny = dy/dist;
              // Place arrow 1/3 of way from outer to center
              const ax = p.x + nx * dist * 0.42, ay = p.y + ny * dist * 0.42;
              const sz = 5;
              return (
                <polygon key={`arr-${cat.id}`}
                  points={`${ax + nx*sz},${ay + ny*sz} ${ax + ny*sz*0.6},${ay - nx*sz*0.6} ${ax - ny*sz*0.6},${ay + nx*sz*0.6}`}
                  fill={cat.color} opacity={0.45}
                />
              );
            })}

            {/* Outer nodes */}
            {outer.map(cat => {
              const p = positions[cat.id];
              const isSel = selected === cat.id;
              const r = isSel ? 48 : 44;
              return (
                <g key={cat.id} onClick={() => onSelect(cat.id)} style={{ cursor: "pointer" }}>
                  <circle cx={p.x} cy={p.y} r={r + 2} fill="none" stroke={cat.color}
                    strokeWidth={isSel ? 2 : 0} opacity={0.2} />
                  <circle cx={p.x} cy={p.y} r={r} fill={cat.bg} stroke={cat.color}
                    strokeWidth={isSel ? 2 : 1.2} />
                  <text x={p.x} y={p.y - 10} textAnchor="middle"
                    fontSize={15} fill={cat.color} fontWeight="700"
                    style={{ fontFamily: "'DM Sans', sans-serif" }}>{cat.icon}</text>
                  <text x={p.x} y={p.y + 6} textAnchor="middle"
                    fontSize={10} fontWeight="700" fill={cat.color}
                    style={{ fontFamily: "'DM Sans', sans-serif" }}>{cat.short}</text>
                  <text x={p.x} y={p.y + 19} textAnchor="middle"
                    fontSize={7.5} fill={C.gray} fontStyle="italic"
                    style={{ fontFamily: "'DM Sans', sans-serif" }}>
                    {cat.question}
                  </text>
                </g>
              );
            })}

            {/* Center node */}
            {(() => {
              const isSel = selected === "resolution";
              const r = isSel ? 58 : 54;
              return (
                <g onClick={() => onSelect("resolution")} style={{ cursor: "pointer" }}>
                  <circle cx={cx} cy={cy} r={r + 6} fill="none" stroke={C.gold}
                    strokeWidth={1} strokeDasharray="4,3" opacity={0.3}
                    style={{ animation: "pulse 3s ease-in-out infinite" }} />
                  <circle cx={cx} cy={cy} r={r} fill={C.goldLight} stroke={C.gold}
                    strokeWidth={isSel ? 2.5 : 1.8}
                    filter={isSel ? "url(#glow)" : undefined} />
                  <text x={cx} y={cy - 16} textAnchor="middle"
                    fontSize={17} fill={C.gold} fontWeight="700"
                    style={{ fontFamily: "'DM Sans', sans-serif" }}>⬢</text>
                  <text x={cx} y={cy + 2} textAnchor="middle"
                    fontSize={11} fontWeight="800" fill={C.gold}
                    style={{ fontFamily: "'DM Sans', sans-serif" }}>Value</text>
                  <text x={cx} y={cy + 15} textAnchor="middle"
                    fontSize={11} fontWeight="800" fill={C.gold}
                    style={{ fontFamily: "'DM Sans', sans-serif" }}>Resolution</text>
                  <text x={cx} y={cy + 29} textAnchor="middle"
                    fontSize={7.5} fill={C.gray} fontStyle="italic"
                    style={{ fontFamily: "'DM Sans', sans-serif" }}>
                    What is it worth?
                  </text>
                </g>
              );
            })()}

            {/* Legend */}
            <text x={12} y={H - 10} fontSize={9} fill={C.gray}
              style={{ fontFamily: "'DM Sans', sans-serif" }}>Click any node to explore</text>
          </svg>
        </div>

        {/* Right panel */}
        <div style={{ flex: 1, paddingTop: 4 }}>
          <h3 style={{ fontFamily: "'DM Serif Display', serif", fontSize: 18, fontWeight: 400, color: C.navy, marginBottom: 12 }}>
            The Structural Gap
          </h3>
          <p style={{ fontSize: 13, lineHeight: 1.7, color: "#555", marginBottom: 14 }}>
            Healthcare IT has organized around four established system categories.
            Each performs a necessary function: recording what happened, analyzing what it means,
            moving data between parties, and incorporating the patient.
          </p>
          <p style={{ fontSize: 13, lineHeight: 1.7, color: "#555", marginBottom: 16 }}>
            But none of these systems <em>complete the economic circuit</em>. None answer:
            given what was produced, what is it worth, to whom, under what contractual terms,
            and how does the exchange actually settle?
          </p>
          <div style={{
            background: C.goldLight, border: `1px solid ${C.goldMuted}`,
            borderRadius: 10, padding: "14px 16px",
          }}>
            <div style={{ fontSize: 11, fontWeight: 700, color: C.gold, marginBottom: 5, letterSpacing: "0.3px" }}>
              ⬢ Systems of Value Resolution
            </div>
            <p style={{ fontSize: 12.5, lineHeight: 1.65, color: C.navy, margin: 0 }}>
              The missing fifth category — infrastructure that measures, decomposes,
              adjudicates, and settles the economic value of clinical episodes.
              Under fee-for-service, this function was trivially embedded in claims
              adjudication. Value-based care demands a dedicated system to resolve value
              across multiple parties, risk structures, and contractual terms.
            </p>
          </div>
          <p style={{ fontSize: 12.5, lineHeight: 1.65, color: "#555", marginTop: 14 }}>
            Zoadigm/MASON occupies this category: consuming outputs from all four other
            system types and producing the one thing none of them can — a deterministic,
            auditable settlement of what care was worth.
          </p>
        </div>
      </div>
    </div>
  );
}

/* ═══════════════════════════════════════════
   FLOWS VIEW
   ═══════════════════════════════════════════ */
function FlowsView({ selected, onSelect }) {
  const layers = [
    { ids: ["engagement"], label: "Patient Boundary" },
    { ids: ["record"], label: "Core Data Layer" },
    { ids: ["insight", "interop"], label: "Intelligence & Transport" },
    { ids: ["resolution"], label: "Value Circuit Completion" },
  ];

  const flowLabels = [
    [{ text: "Patient-generated data (ePROs, symptoms, adherence)", color: C.green }],
    [
      { text: "Raw data for analysis", color: C.purple },
      { text: "Claims & episode events", color: C.gold },
      { text: "Data transport", color: C.teal },
    ],
    [
      { text: "Pathway & risk signals", color: C.purple },
      { text: "Normalized cross-party data", color: C.teal },
    ],
  ];

  return (
    <div style={{
      background: C.white, borderRadius: 14, padding: "22px 24px",
      border: `1px solid ${C.grayBorder}`, boxShadow: "0 1px 4px rgba(0,0,0,0.04)",
    }}>
      <h3 style={{ fontFamily: "'DM Serif Display', serif", fontSize: 18, fontWeight: 400, color: C.navy, marginBottom: 4 }}>
        Data Flow Architecture
      </h3>
      <p style={{ fontSize: 13, color: C.gray, marginBottom: 22, lineHeight: 1.5 }}>
        How information cascades through system layers — all paths converge at Value Resolution
      </p>

      <div style={{ display: "flex", flexDirection: "column", gap: 0 }}>
        {layers.map((layer, li) => (
          <React.Fragment key={li}>
            {/* Layer */}
            <div style={{ display: "flex", gap: 10, justifyContent: "center" }}>
              {layer.ids.map(id => {
                const cat = CATEGORIES.find(c => c.id === id);
                const isSel = selected === id;
                const isRes = id === "resolution";
                return (
                  <div key={id} onClick={() => onSelect(id)} style={{
                    flex: layer.ids.length === 1 ? "0 1 580px" : "0 1 285px",
                    padding: "12px 16px", borderRadius: 10, cursor: "pointer",
                    background: isRes ? `linear-gradient(135deg, ${cat.bg}, ${C.white})` : isSel ? cat.bg : C.grayLight,
                    border: `1.5px solid ${isSel || isRes ? cat.color : "transparent"}`,
                    display: "flex", alignItems: "center", gap: 12,
                    transition: "all 0.2s",
                    boxShadow: isRes ? `0 2px 12px ${C.gold}18` : "none",
                  }}>
                    <span style={{
                      width: 32, height: 32, borderRadius: 7,
                      background: `${cat.color}12`, border: `1px solid ${cat.color}25`,
                      display: "flex", alignItems: "center", justifyContent: "center",
                      fontSize: 14, color: cat.color, fontWeight: 700, flexShrink: 0,
                    }}>{cat.icon}</span>
                    <div>
                      <div style={{ fontSize: 12, fontWeight: 700, color: cat.color }}>{cat.label}</div>
                      <div style={{ fontSize: 10.5, color: C.gray, fontStyle: "italic" }}>"{cat.question}"</div>
                    </div>
                  </div>
                );
              })}
            </div>

            {/* Flow labels between layers */}
            {li < flowLabels.length && (
              <div style={{
                display: "flex", justifyContent: "center", alignItems: "center",
                gap: 8, padding: "5px 0",
              }}>
                <span style={{ fontSize: 10, color: "#CCC", lineHeight: 1 }}>▼</span>
                <div style={{ display: "flex", gap: 6, flexWrap: "wrap", justifyContent: "center" }}>
                  {flowLabels[li].map((fl, fi) => (
                    <span key={fi} style={{
                      fontSize: 9.5, fontWeight: 600, color: fl.color,
                      background: `${fl.color}0A`, padding: "2px 8px",
                      borderRadius: 4, border: `1px solid ${fl.color}15`,
                    }}>{fl.text}</span>
                  ))}
                </div>
                <span style={{ fontSize: 10, color: "#CCC", lineHeight: 1 }}>▼</span>
              </div>
            )}
          </React.Fragment>
        ))}
      </div>

      {/* Feedback loop */}
      <div style={{
        marginTop: 16, padding: "10px 14px", borderRadius: 8,
        background: C.goldLight, border: `1px solid ${C.goldMuted}44`,
      }}>
        <span style={{ fontSize: 11, fontWeight: 700, color: C.gold }}>↩ Feedback Loop: </span>
        <span style={{ fontSize: 11, color: C.navy }}>
          Settlement artifacts (statements, remittance records, dispute outcomes)
          flow back into Systems of Record as new financial events, closing the circuit.
        </span>
      </div>
    </div>
  );
}

/* ═══════════════════════════════════════════
   MOMENTS VIEW
   ═══════════════════════════════════════════ */
function MomentsView() {
  const [expanded, setExpanded] = useState(null);

  return (
    <div style={{
      background: C.white, borderRadius: 14, padding: "22px 24px",
      border: `1px solid ${C.grayBorder}`, boxShadow: "0 1px 4px rgba(0,0,0,0.04)",
    }}>
      <h3 style={{ fontFamily: "'DM Serif Display', serif", fontSize: 18, fontWeight: 400, color: C.navy, marginBottom: 4 }}>
        The Five Moments of Value Resolution
      </h3>
      <p style={{ fontSize: 13, color: C.gray, marginBottom: 24, lineHeight: 1.5 }}>
        Value Resolution is not a single function but a circuit of five interdependent moments — each necessary, none sufficient alone
      </p>

      {/* Horizontal moment cards */}
      <div style={{ display: "flex", gap: 6 }}>
        {MOMENTS.map((m, i) => {
          const isExp = expanded === i;
          const isLast = i === MOMENTS.length - 1;
          return (
            <React.Fragment key={i}>
              <div
                onClick={() => setExpanded(isExp ? null : i)}
                style={{
                  flex: 1, padding: "16px 12px", borderRadius: 10, cursor: "pointer",
                  background: isLast ? C.goldLight : isExp ? C.grayLight : C.white,
                  border: `1.5px solid ${isExp ? C.gold : isLast ? `${C.gold}60` : C.grayBorder}`,
                  textAlign: "center", transition: "all 0.25s",
                  boxShadow: isExp ? `0 2px 12px ${C.gold}15` : "none",
                }}
              >
                <div style={{
                  width: 32, height: 32, margin: "0 auto 8px", borderRadius: "50%",
                  background: isLast ? `${C.gold}18` : `${C.navy}08`,
                  border: `1.5px solid ${isLast ? C.gold : C.navy}20`,
                  display: "flex", alignItems: "center", justifyContent: "center",
                  fontSize: 14, color: isLast ? C.gold : C.navy,
                }}>{m.icon}</div>
                <div style={{ fontSize: 11, fontWeight: 700, color: isLast ? C.gold : C.navy, marginBottom: 4 }}>
                  {m.label}
                </div>
                <div style={{ fontSize: 9.5, color: C.gray, lineHeight: 1.4 }}>{m.desc}</div>
              </div>
              {i < MOMENTS.length - 1 && (
                <div style={{ display: "flex", alignItems: "center", color: C.goldMuted, fontSize: 14, flexShrink: 0 }}>→</div>
              )}
            </React.Fragment>
          );
        })}
      </div>

      {/* Gradient bar */}
      <div style={{
        height: 3, margin: "12px 0 0",
        background: `linear-gradient(to right, ${C.darkBlue}, ${C.purple}, ${C.teal}, ${C.gold}, ${C.gold})`,
        borderRadius: 2, opacity: 0.5,
      }} />

      {/* Expanded detail */}
      {expanded !== null && (
        <div style={{
          marginTop: 14, padding: "14px 18px", borderRadius: 10,
          background: C.grayLight, borderLeft: `3px solid ${C.gold}`,
          animation: "fadeIn 0.25s ease-out",
        }}>
          <div style={{ fontSize: 11, fontWeight: 700, color: C.gold, marginBottom: 5 }}>
            MASON Implementation — {MOMENTS[expanded].label}
          </div>
          <div style={{ fontSize: 13, lineHeight: 1.6, color: C.navy }}>
            {MOMENTS[expanded].mason}
          </div>
        </div>
      )}

      {/* MASON mapping grid */}
      <h4 style={{ fontSize: 13, fontWeight: 700, color: C.gold, marginTop: 24, marginBottom: 12, letterSpacing: "0.2px" }}>
        How Zoadigm/MASON Executes Each Moment
      </h4>
      <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 10 }}>
        {MOMENTS.map((m, i) => (
          <div key={i} style={{
            padding: "12px 14px", borderRadius: 8,
            background: C.grayLight, borderLeft: `3px solid ${i === MOMENTS.length - 1 ? C.gold : `${C.gold}60`}`,
            gridColumn: i === MOMENTS.length - 1 ? "1 / -1" : undefined,
          }}>
            <div style={{ fontSize: 10, fontWeight: 700, color: C.gold, marginBottom: 4, textTransform: "uppercase", letterSpacing: "0.5px" }}>
              {m.icon} {m.label}
            </div>
            <div style={{ fontSize: 12, lineHeight: 1.6, color: C.navy }}>{m.mason}</div>
          </div>
        ))}
      </div>

      {/* Bottom callout */}
      <div style={{
        marginTop: 20, padding: "16px 18px", borderRadius: 10,
        background: C.goldLight, border: `1px solid ${C.goldMuted}`,
      }}>
        <p style={{ fontSize: 12.5, lineHeight: 1.65, color: C.navy, margin: 0 }}>
          <strong>The category insight:</strong> Under fee-for-service, Value Resolution was
          trivially embedded in claims adjudication — each service had a fixed price.
          Value-based care breaks this assumption. The value of clinical labor is now
          contingent on episode-level outcomes, pathway adherence, cost efficiency
          relative to a target, and multi-party risk-sharing arrangements. The exchange
          is no longer a price lookup — it is a complex, multi-party computation that
          demands its own dedicated system category.
        </p>
      </div>
    </div>
  );
}

/* ── Render ── */
ReactDOM.render(<App />, document.getElementById("root"));
</script>
</body>
</html>
